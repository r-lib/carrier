<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • carrier</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">carrier</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-lib/carrier/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/r-lib/carrier/blob/v0.3.0/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="0.3.0" id="carrier-030">carrier 0.3.0<a class="anchor" aria-label="anchor" href="#carrier-030"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-3-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-3-0"></a></h3>
<p>This release modifies the behaviour of functions crated via <code>...</code>, i.e. in cases like:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span></span>
<span></span>
<span><span class="fu"><a href="../reference/crate.html">crate</a></span><span class="op">(</span>\<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">foo</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, foo <span class="op">=</span> <span class="va">foo</span><span class="op">)</span></span></code></pre></div>
<p>Functions passed through <code>...</code>, such as <code>foo</code> in this example, are now automatically <em>crated</em> in the same environment as the main crate. This behaviour change may break your code in some cases but has two important benefits that we thought were worth it:</p>
<ol style="list-style-type: decimal"><li>
<p>In the global environment, it allows helper functions to depend on other helper functions defined globally. Take for instance:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">bar</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">bar</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span></span>
<span></span>
<span><span class="fu"><a href="../reference/crate.html">crate</a></span><span class="op">(</span>\<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">foo</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, foo <span class="op">=</span> <span class="va">foo</span>, bar <span class="op">=</span> <span class="va">bar</span><span class="op">)</span></span></code></pre></div>
<p>Before this change, both <code>foo</code> and <code>bar</code> would inherit from the global environment, before and after being sent to a remote context. While the local context has both <code>foo</code> and <code>bar</code> defined in the global environment, this would not be the case remotely, and <code>foo</code> would not be able to resolve <code>bar</code>.</p>
<p>Now that we recrate all <code>...</code> closures withing the main crate environment, they are able to see each other.</p>
</li>
<li>
<p>In a local environment (e.g. in a function or within <code><a href="https://rdrr.io/r/base/eval.html" class="external-link">local()</a></code>), the chain of closure environments used to be included in the crate up to the global environment. This meant the problem descibed in (1) didn’t apply in local environments, but the flip side is that it was also easy to inadvertently capture large objects defined in these environments:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">local</a></span><span class="op">(</span><span class="op">{</span></span>
<span>   <span class="va">large_object</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1e8</span><span class="op">)</span></span>
<span>   <span class="va">parameter</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>   <span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="va">parameter</span></span>
<span></span>
<span>   <span class="fu"><a href="../reference/crate.html">crate</a></span><span class="op">(</span>\<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">foo</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, foo <span class="op">=</span> <span class="va">foo</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>In this example, <code>large_object</code> would be included in the crate alongside <code>foo</code>, causing performance issues when sending the crate to a remote context. This is no longer possible now that <code>foo</code> is automatically crated. Any relevant object must be explicitly crated, in one of these ways:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">local</a></span><span class="op">(</span><span class="op">{</span></span>
<span>   <span class="va">parameter</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>   <span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="va">parameter</span></span>
<span></span>
<span>   <span class="fu"><a href="../reference/crate.html">crate</a></span><span class="op">(</span>\<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">foo</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, foo <span class="op">=</span> <span class="va">foo</span>, parameter <span class="op">=</span> <span class="va">parameter</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or equivalently</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">local</a></span><span class="op">(</span><span class="op">{</span></span>
<span>   <span class="va">parameter</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>   <span class="va">foo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/crate.html">crate</a></span><span class="op">(</span>\<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span> <span class="op">+</span> <span class="va">parameter</span>, parameter <span class="op">=</span> <span class="va">parameter</span><span class="op">)</span></span>
<span></span>
<span>   <span class="fu"><a href="../reference/crate.html">crate</a></span><span class="op">(</span>\<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">foo</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, foo <span class="op">=</span> <span class="va">foo</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
</li>
</ol></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0" id="carrier-020">carrier 0.2.0<small>2025-06-23</small><a class="anchor" aria-label="anchor" href="#carrier-020"></a></h2>
<ul><li><p><code><a href="../reference/crate.html">crate()</a></code> gains a <code>.parent_env</code> argument. The default is <code><a href="https://rdrr.io/r/base/environment.html" class="external-link">baseenv()</a></code> in order to isolate the crate from the global search path. You can now set it to another environment. For instance, set it to <code><a href="https://rdrr.io/r/base/environment.html" class="external-link">globalenv()</a></code> to make your crate inherit from the search path. Note that, as the global environment is serialized by name rather than by value, the crate is still isolated from objects in the global environment (<a href="https://github.com/r-lib/carrier/issues/16" class="external-link">#16</a>).</p></li>
<li><p><code><a href="../reference/crate.html">crate()</a></code> now requires all <code>...</code> arguments to be named instead of silently dropping unnamed arguments (<a href="https://github.com/r-lib/carrier/issues/15" class="external-link">#15</a>).</p></li>
<li><p><code><a href="../reference/crate.html">crate()</a></code> gains <code>.error_arg</code> and <code>.error_call</code> arguments to allow for better error messages when calling <code><a href="../reference/crate.html">crate()</a></code> from other functions (<a href="https://github.com/r-lib/carrier/issues/14" class="external-link">#14</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.1" id="carrier-011">carrier 0.1.1<small>2023-04-28</small><a class="anchor" aria-label="anchor" href="#carrier-011"></a></h2>
<ul><li><p>Crated functions no longer carry source references (<a href="https://github.com/r-lib/carrier/issues/6" class="external-link">#6</a>).</p></li>
<li><p>Fixed issue that prevented crate sizes to be printed in human-readable format (r-lib/lobstr#60).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.0" id="carrier-010">carrier 0.1.0<small>2018-10-16</small><a class="anchor" aria-label="anchor" href="#carrier-010"></a></h2>
<p>Initial release. The package currently only contains a single method for creating crates that requires users to be explicit about what data to pack in the crate. A future release will provide a method to figure out automatically what objects the crate depends on (with inevitable false positives and negatives).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Lionel Henry, Posit Software, PBC.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

